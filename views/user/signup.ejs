
 <%- include ('partial/header') -%>

<div class="text-center center-div d-flex align-items-center boarder-2 justify-content-center" id="LoginPage">
    <div class="wrapper text-center center-div align-items-center justify-content-center">
        <div class="title-one">
            Sign up
        </div>
        <%if(err){%>
            <span id="err" class="alert-danger">
              <%=err%>
            </span>
          <%}%>
        <form action="/user/signup" method="POST" onsubmit="return validateForm() " id="signupform">
            <div class="field">
                <input type="text" id="name" name="name" required onchange="validateUserName()">
                <label>Full Name</label>
            </div>
            <p class="msg" id="nameError"></p>
            <div class="field">
                <input type="text" id="email" name="email" required onchange="validateUserEmail()">
                <label>Email Address</label>
            </div>
            <p class="msg" id="emailError"></p>
            <div class="field">
                <input type="password"  name="password" id="password" required onchange="validatePassword();" >
                <label>Password</label>
            </div>
            <p class="msg" id="passwordError"></p>
            <div class="field">
                <input type="password" name="confirmPassword" id="confirmPassword" required onkeyup="checkPasswordMatch();">
                <label>Confirm Password</label>
            </div>
            <p class="message" id="confirmError"></p>
            <br>
            <div class="field">
                <input type="submit" value="Sign Up">
            </div>
            <div class="signup-link">
                Already have an account? <a href="/user/tologin">Login</a>
            </div>
            <br>
        </form>
    </div>
</div>



<script>
function validateUserName() {
    var usernamePattern = /^[a-zA-Z0-9_.\s]{3,16}$/;
    var name = document.getElementById("name").value;
    var msg = document.getElementById("nameError");
    var signupButton = document.getElementById("signupButton");
  
    if (usernamePattern.test(name) && name.trim().length >3) {
        msg.innerHTML = "";
        signupButton.disabled = false; // Enable the button
    } else {
        msg.innerHTML = "Username must be 3-20 characters";
        signupButton.disabled = true; // Disable the button
    }
  }
  function validateUserEmail() {
    var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
    var email = document.getElementById("email").value;
    var isValid = emailPattern.test(email);
    var msg = document.getElementById("emailError");
    var signupButton = document.getElementById("signupButton");
  
    if (isValid) {
        msg.innerHTML = "";
        signupButton.disabled = false; // Enable the button
    } else {
        msg.innerHTML = "Invalid email address";
        signupButton.disabled = true; // Disable the button
    }
  }
  function validatePassword() {
    var passwordPattern = /^.{4,}$/;
    var msg = document.getElementById("passwordError");
    var password = document.getElementById("password").value;
    var isValid = passwordPattern.test(password);
    var signupButton = document.getElementById("signupButton");
  
    if (isValid && password.trim().length >=4) {
        msg.innerHTML = "";
        signupButton.disabled = false; // Enable the button
    } else {
        msg.innerHTML = "Password must be at least 4 characters";
        signupButton.disabled = true; // Disable the button
    }
  }
  function checkPasswordMatch() {
    var password = document.getElementById("password").value;
    var confirmPassword = document.getElementById("confirm-password").value;
    var message = document.getElementById("confirmError");
    // var messagep = document.getElementById("messagep");
    var signupButton = document.getElementById("signupButton");
  
    if (password === confirmPassword) {
        message.innerHTML = ""; // Clear the error message
        signupButton.disabled = false; // Enable the button
    } else {
        message.innerHTML = "Passwords do not match. Please try again.";
        signupButton.disabled = true; // Disable the button
    }
  }
  
  var error = document.getElementById("err");
  function hideError() {
      if (error) {
        error.style.display = "none";
      }
    }
  setTimeout(hideError, 3000);
  
  const togglePassword = document.getElementById("eye");
  const password = document.getElementById("password");
  
  togglePassword.addEventListener("click", function () {
    // toggle the type attribute
    if (password.type == "password") {
      password.type = "text";
      togglePassword.classList.remove("fa-eye");
      togglePassword.classList.add("fa-eye-slash");
    } else {
      password.type = "password";
      togglePassword.classList.remove("fa-eye-slash");
      togglePassword.classList.add("fa-eye");
    }
  });
</script>

 <%- include('partial/footer') -%>
 